{% extends 'base.html' %}

{% load i18n %}
{% load future %}
{% load gravatar %}
{% load staticfiles %}
{% load qurl %}
{% load stars %}

{% block css %}
    {{ block.super }}
    <link href="{% static 'boots/css/search.css' %}" rel="stylesheet">
    {% include 'boots/star_boot_css.html' %}
{% endblock css %}

{% block class %}{{ block.super }} boots-search{% endblock class %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-lg-3 filters">
                {% if team %}
                <div class="well">
                    <div class="row">
                        <img class="col-md-12" src="{% gravatar team.email 200 %}" />
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <h5><i class="icon-user"></i> {{ team.slug }}</h5>
                            <h5><i class="icon-envelope"></i> {{ team.email }}</h5>
                            {% if team.url %}
                            <h5><i class="icon-link"></i> {{ team.url }}</h5>
                            {% endif %}
                            {% if team.created %}
                            <h5><i class="icon-time"></i> Joined on {{ team.created|date:'M j, Y' }}</h5>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endif %}
                <form class="form-inline" role="form" method="get" action="{% qurl request.get_full_path q=None %}">
                    <div class="input-group">
                        <input name="q" class="form-control" type="text" placeholder="Search..." value="{{ form.q.value|default_if_none:'' }}">
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit"><i class="icon-search"></i></button>
                        </span>
                    </div>
                </form>
                <h4>Type</h4>
                <div class="btn-group btn-group-sm">
                    <a href="{% qurl request.get_full_path type=None %}" type="button" class="btn btn-default">All</a>
                    <a href="{% qurl request.get_full_path type='P' %}" type="button" class="btn btn-default">{% trans 'Project' %}</a>
                    <a href="{% qurl request.get_full_path type='A' %}" type="button" class="btn btn-default">{% trans 'App' %}</a>
                    <a href="{% qurl request.get_full_path type='C' %}" type="button" class="btn btn-default">{% trans 'CookieCutter' %}</a>
                </div>
                <h4>Tags</h4>
                <ul class="nav nav-pills nav-stacked">
                    <li class="active">
                        <a href="#">
                            <span class="badge pull-right">42</span>
                            puppet
                        </a>
                    </li>
                    <li class="">
                        <a href="#">
                            <span class="badge pull-right">34</span>
                            sphinx
                        </a>
                    </li>
                    <li>
                        <form class="form-inline" role="form" method="get" action="{{ request.get_full_path }}">
                            <input name="tag" class="form-control" type="text" placeholder="Type a tag...">
                            <input name="tag" class="form-control" type="text" value="aaad">
                            <input type="submit" >
                        </form>
                    </li>
                </ul>
            </div>
            <div class="col-lg-9 results">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="btn-group btn-group-sm pull-right">
                            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                {% block sort_name %}{% trans 'Sort:' %}{% endblock sort_name %}
                                <strong>{% block sort_active %}{% trans 'Most Loved' %}{% endblock sort_active %}</strong>
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu" role="menu">
                                {% block sort_options %}
                                <li><a href="{% qurl request.get_full_path sort='loved' %}">{% trans 'Most Loved' %}</a></li>
                                <li><a href="{% qurl request.get_full_path sort='adde' %}">{% trans 'Recently Added' %}</a></li>
                                <li><a href="{% qurl request.get_full_path sort='modified' %}">{% trans 'Recently Modified' %}</a></li>
                                {% endblock sort_options %}
                            </ul>
                        </div>
                        <h2>{% block search_title %}{% trans 'Results' %}{% endblock search_title %} <small>{{ page.paginator.count }} boots</small></h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="list-group">
                            {% for boot in page.object_list %}
                            <div class="list-group-item">
                                <h4 class="list-group-item-heading">
                                    <span class="pull-right">{% star_button boot.object css_class='btn-xs' %}</span>
                                    <a href="{{ boot.object.team.get_absolute_url }}">{{ boot.object.team.slug }}</a>
                                    /
                                    <a href="{{ boot.object.get_absolute_url }}">{{ boot.slug }}</a>
                                </h4>
                                <p class="list-group-item-text">{{ boot.object.tagline }}</p>
                                <p class="list-group-item-text">
                                    {% if boot.type == 'A' %}
                                    <span class="label label-default">app</span>
                                    {% elif boot.type == 'C' %}
                                        <span class="label label-default">cookiecutter</span>
                                    {% else %}
                                    <span class="label label-default">project</span>
                                    {% endif %}
                                    {% for tag in boot.object.tags.all %}
                                    <a class="label label-primary" href="{% qurl request.get_full_path tag+=tag.slug %}">{{ tag.slug }}</a>
                                    {% endfor %}
                                </p>
                            </div>
                            {% empty %}
                                <div class="alert alert-info text-center">No boots found.</div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 text-center">
                        <ul class="pagination">
                            {% if page.has_previous %}
                            <li><a href="{% qurl request.get_full_path page=page.previous_page_number %}">&laquo;</a></li>
                            {% else %}
                            <li class="disabled"><a href="#">&laquo;</a></li>
                            {% endif %}



                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            {% if page.has_next %}
                                <li><a href="{% qurl request.get_full_path page=page.next_page_number %}">&raquo;</a></li>
                            {% else %}
                                <li class="disabled"><a href="#">&raquo;</a></li>
                            {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}

{% block js %}
    {{ block.super }}
    {% include 'boots/star_boot_js.html' %}
{% endblock %}
